"use strict";(self.webpackChunkcodex_chat_notebook=self.webpackChunkcodex_chat_notebook||[]).push([[905],{7905:(e,t,l)=>{l.d(t,{v:()=>m});var n=l(9321),o=l(4166),i=l(3468),d=l(9850),c=l(1797),a=l(608),r=l(6168),s=l(6271);const u="application/vnd.jupyter.cells",g="jp-mod-sideBySide";class f extends Error{constructor(e){const t=e,l=t.ename,n=t.evalue;super(`KernelReplyNotOK: ${l} ${n}`),this.errorName=l,this.errorValue=n,this.traceback=t.traceback,Object.setPrototypeOf(this,f.prototype)}}class m{static get executed(){return C.executed}static get executionScheduled(){return C.executionScheduled}static get selectionExecuted(){return C.selectionExecuted}constructor(){}}var C;!function(e){function t(t,l,n){const i=(0,d.findIndex)(n.widgets,((e,l)=>t.model.id===e.model.id));if(-1===i)return-1;if(!n.widgets.length)return i+1;let c=e.getHeadingInfo(t);if(t.isHidden||!(t instanceof o.MarkdownCell)||!c.isHeading)return i+1;let a,r=!1,s=0;for(a=i+1;a<n.widgets.length;a++){let t=n.widgets[a],o=e.getHeadingInfo(t);if(o.isHeading&&o.headingLevel<=c.headingLevel){a-=1;break}r&&o.isHeading&&o.headingLevel<=s&&(r=!1),l||r?t.setHidden(!0):(o.collapsed&&o.isHeading&&(r=!0,s=o.headingLevel),t.setHidden(!1))}return a===n.widgets.length?t.numberChildNodes=a-i-1:t.numberChildNodes=a-i,e.setCellCollapse(t,l),a+1}function l(e){if(!(e instanceof o.MarkdownCell))return{isHeading:!1,headingLevel:7};let t=e.headingInfo.level;return{isHeading:t>0,headingLevel:t,collapsed:e.headingCollapsed}}e.splitCell=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.deselectAll();const l=e.model,n=e.activeCellIndex,o=e.widgets[n],i=o.editor,d=i.getSelections(),c=o.model.value.text,a=[0];let r=-1,s=-1;for(let e=0;e<d.length;e++)r=i.getOffsetAt(d[e].start),s=i.getOffsetAt(d[e].end),r<s?(a.push(r),a.push(s)):s<r?(a.push(s),a.push(r)):a.push(r);a.push(c.length);const u=[];for(let e=0;e+1<a.length;e++){const e=C.cloneCell(l,o.model);u.push(e)}for(let e=0;e<u.length;e++)e!==u.length-1&&"code"===u[e].type&&u[e].outputs.clear(),u[e].value.text=c.slice(a[e],a[e+1]).replace(/^\n+/,"").replace(/\n+$/,"");const g=l.cells;g.beginCompoundOperation();for(let e=0;e<u.length;e++)0===e?g.set(n,u[e]):g.insert(n+e,u[e]);g.endCompoundOperation();const f=r!==s?2:1;e.activeCellIndex=n+u.length-f,e.activeCell.editor.focus(),C.handleState(e,t)},e.mergeCells=function(e,t=!1){if(!e.model||!e.activeCell)return;const l=C.getState(e),n=[],i=[],d=e.model,c=d.cells,a=e.activeCell,r=e.activeCellIndex,s={};if(e.widgets.forEach(((t,l)=>{if(e.isSelectedOrActive(t)){n.push(t.model.value.text),l!==r&&i.push(t.model);const e=t.model;if((0,o.isRawCellModel)(e)||(0,o.isMarkdownCellModel)(e))for(const t of e.attachments.keys)s[t]=e.attachments.get(t).toJSON()}})),1===n.length)if(!0===t){if(0===r)return;const e=c.get(r-1);n.unshift(e.value.text),i.push(e)}else if(!1===t){if(r===c.length-1)return;const e=c.get(r+1);n.push(e.value.text),i.push(e)}e.deselectAll();const u=C.cloneCell(d,a.model);u.value.text=n.join("\n\n"),(0,o.isCodeCellModel)(u)?u.outputs.clear():((0,o.isMarkdownCellModel)(u)||(0,o.isRawCellModel)(u))&&u.attachments.fromJSON(s),c.beginCompoundOperation(),c.set(r,u),i.forEach((e=>{c.removeValue(e)})),c.endCompoundOperation(),a instanceof o.MarkdownCell&&(e.activeCell.rendered=!1),C.handleState(e,l)},e.deleteCells=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);C.deleteCells(e),C.handleState(e,t,!0)},e.insertAbove=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e),l=e.model,n=l.contentFactory.createCell(e.notebookConfig.defaultCell,{}),o=e.activeCellIndex;l.cells.insert(o,n),e.activeCellIndex=o,e.deselectAll(),C.handleState(e,t,!0)},e.insertBelow=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e),l=e.model,n=l.contentFactory.createCell(e.notebookConfig.defaultCell,{});l.cells.insert(e.activeCellIndex+1,n),e.activeCellIndex++,e.deselectAll(),C.handleState(e,t,!0)},e.moveDown=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e),l=e.model.cells,n=e.widgets;l.beginCompoundOperation();for(let t=l.length-2;t>-1;t--)e.isSelectedOrActive(n[t])&&(e.isSelectedOrActive(n[t+1])||(l.move(t,t+1),e.activeCellIndex===t&&e.activeCellIndex++,e.select(n[t+1]),e.deselect(n[t])));l.endCompoundOperation(),C.handleState(e,t,!0)},e.moveUp=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e),l=e.model.cells,n=e.widgets;l.beginCompoundOperation();for(let t=1;t<l.length;t++)e.isSelectedOrActive(n[t])&&(e.isSelectedOrActive(n[t-1])||(l.move(t,t-1),e.activeCellIndex===t&&e.activeCellIndex--,e.select(n[t-1]),e.deselect(n[t])));l.endCompoundOperation(),C.handleState(e,t,!0)},e.changeCellType=function(e,t){if(!e.model||!e.activeCell)return;const l=C.getState(e);C.changeCellType(e,t),C.handleState(e,l)},e.run=function(e,t){if(!e.model||!e.activeCell)return Promise.resolve(!1);const l=C.getState(e),n=C.runSelected(e,t);return C.handleRunState(e,l,!1),n},e.runAndAdvance=function(e,t){if(!e.model||!e.activeCell)return Promise.resolve(!1);const l=C.getState(e),n=C.runSelected(e,t),o=e.model;if(e.activeCellIndex===e.widgets.length-1){const t=o.contentFactory.createCell(e.notebookConfig.defaultCell,{});o.cells.insert(e.widgets.length,t),e.activeCellIndex++,e.mode="edit"}else e.activeCellIndex++;return C.handleRunState(e,l,!0),n},e.runAndInsert=function(e,t){if(!e.model||!e.activeCell)return Promise.resolve(!1);const l=C.getState(e),n=C.runSelected(e,t),o=e.model,i=o.contentFactory.createCell(e.notebookConfig.defaultCell,{});return o.cells.insert(e.activeCellIndex+1,i),e.activeCellIndex++,e.mode="edit",C.handleRunState(e,l,!0),n},e.runAll=function(e,t){if(!e.model||!e.activeCell)return Promise.resolve(!1);const l=C.getState(e);e.widgets.forEach((t=>{e.select(t)}));const n=C.runSelected(e,t);return C.handleRunState(e,l,!0),n},e.renderAllMarkdown=function(e,t){if(!e.model||!e.activeCell)return Promise.resolve(!1);const l=e.activeCellIndex,n=C.getState(e);if(e.widgets.forEach(((t,l)=>{"markdown"===t.model.type&&(e.select(t),e.activeCellIndex=l)})),"markdown"!==e.activeCell.model.type)return Promise.resolve(!0);const o=C.runSelected(e,t);return e.activeCellIndex=l,C.handleRunState(e,n,!0),o},e.runAllAbove=function(e,t){const{activeCell:l,activeCellIndex:n,model:o}=e;if(!o||!l||n<1)return Promise.resolve(!1);const i=C.getState(e);e.activeCellIndex--,e.deselectAll();for(let t=0;t<e.activeCellIndex;++t)e.select(e.widgets[t]);const d=C.runSelected(e,t);return e.activeCellIndex++,C.handleRunState(e,i,!0),d},e.runAllBelow=function(e,t){if(!e.model||!e.activeCell)return Promise.resolve(!1);const l=C.getState(e);e.deselectAll();for(let t=e.activeCellIndex;t<e.widgets.length;++t)e.select(e.widgets[t]);const n=C.runSelected(e,t);return C.handleRunState(e,l,!0),n},e.replaceSelection=function(e,t){var l,n;e.model&&e.activeCell&&(null===(n=(l=e.activeCell.editor).replaceSelection)||void 0===n||n.call(l,t))},e.selectAbove=function(e){if(!e.model||!e.activeCell)return;if(0===e.activeCellIndex)return;let t=e.activeCellIndex-1;for(;t>=0;){const l=e.widgets[t];if(!l.inputHidden&&!l.isHidden)break;t-=1}const l=C.getState(e);e.activeCellIndex=t,e.deselectAll(),C.handleState(e,l,!0)},e.selectBelow=function(e){if(!e.model||!e.activeCell)return;let t=e.widgets.length-1;for(;e.widgets[t].isHidden||e.widgets[t].inputHidden;)t-=1;if(e.activeCellIndex===t)return;let l=e.activeCellIndex+1;for(;l<t;){let t=e.widgets[l];if(!t.inputHidden&&!t.isHidden)break;l+=1}const n=C.getState(e);e.activeCellIndex=l,e.deselectAll(),C.handleState(e,n,!0)},e.extendSelectionAbove=function(e,t=!1){if(!e.model||!e.activeCell)return;if(0===e.activeCellIndex)return;const l=C.getState(e);e.mode="command",t?e.extendContiguousSelectionTo(0):e.extendContiguousSelectionTo(e.activeCellIndex-1),C.handleState(e,l,!0)},e.extendSelectionBelow=function(e,t=!1){if(!e.model||!e.activeCell)return;if(e.activeCellIndex===e.widgets.length-1)return;const l=C.getState(e);e.mode="command",t?e.extendContiguousSelectionTo(e.widgets.length-1):e.extendContiguousSelectionTo(e.activeCellIndex+1),C.handleState(e,l,!0)},e.selectAll=function(e){e.model&&e.activeCell&&e.widgets.forEach((t=>{e.select(t)}))},e.deselectAll=function(e){e.model&&e.activeCell&&e.deselectAll()},e.copy=function(e){C.copyOrCut(e,!1)},e.cut=function(e){C.copyOrCut(e,!0)},e.paste=function(e,t="below"){if(!e.model||!e.activeCell)return;const l=n.Clipboard.getInstance();if(!l.hasData(u))return;const o=C.getState(e),i=l.getData(u),d=e.model;e.mode="command";const c=i.map((t=>{switch(t.cell_type){case"code":if("cut"===e.lastClipboardInteraction&&"string"==typeof t.id){let e=t.id;return d.contentFactory.createCodeCell({id:e,cell:t})}return d.contentFactory.createCodeCell({cell:t});case"markdown":return d.contentFactory.createMarkdownCell({cell:t});default:return d.contentFactory.createRawCell({cell:t})}})),a=e.model.cells;let r;switch(a.beginCompoundOperation(),t){case"below":r=e.activeCellIndex;break;case"above":r=e.activeCellIndex-1;break;case"replace":{const t=[];e.widgets.forEach(((l,n)=>{const o=!1!==l.model.metadata.get("deletable");e.isSelectedOrActive(l)&&o&&t.push(n)})),t.length>0&&t.reverse().forEach((e=>{a.remove(e)})),r=t[0];break}}c.forEach((e=>{a.insert(++r,e)})),a.endCompoundOperation(),e.activeCellIndex+=c.length,e.deselectAll(),e.lastClipboardInteraction="paste",C.handleState(e,o)},e.undo=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.mode="command",e.model.sharedModel.undo(),e.deselectAll(),C.handleState(e,t)},e.redo=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.mode="command",e.model.sharedModel.redo(),e.deselectAll(),C.handleState(e,t)},e.toggleAllLineNumbers=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e),l=e.editorConfig,n=!(l.code.lineNumbers&&l.markdown.lineNumbers&&l.raw.lineNumbers),o={code:Object.assign(Object.assign({},l.code),{lineNumbers:n}),markdown:Object.assign(Object.assign({},l.markdown),{lineNumbers:n}),raw:Object.assign(Object.assign({},l.raw),{lineNumbers:n})};e.editorConfig=o,C.handleState(e,t)},e.clearOutputs=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);(0,d.each)(e.model.cells,((t,l)=>{const n=e.widgets[l];e.isSelectedOrActive(n)&&"code"===t.type&&(t.clearExecution(),n.outputHidden=!1)})),C.handleState(e,t,!0)},e.clearAllOutputs=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);(0,d.each)(e.model.cells,((t,l)=>{const n=e.widgets[l];"code"===t.type&&(t.clearExecution(),n.outputHidden=!1)})),C.handleState(e,t,!0)},e.hideCode=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.widgets.forEach((t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.inputHidden=!0)})),C.handleState(e,t)},e.showCode=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.widgets.forEach((t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.inputHidden=!1)})),C.handleState(e,t)},e.hideAllCode=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.widgets.forEach((e=>{"code"===e.model.type&&(e.inputHidden=!0)})),C.handleState(e,t)},e.showAllCode=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.widgets.forEach((e=>{"code"===e.model.type&&(e.inputHidden=!1)})),C.handleState(e,t)},e.hideOutput=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.widgets.forEach((t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.outputHidden=!0)})),C.handleState(e,t,!0)},e.showOutput=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.widgets.forEach((t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.outputHidden=!1)})),C.handleState(e,t)},e.hideAllOutputs=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.widgets.forEach((e=>{"code"===e.model.type&&(e.outputHidden=!0)})),C.handleState(e,t,!0)},e.renderSideBySide=function(e){e.node.classList.add(g)},e.renderNotSideBySide=function(e){e.node.classList.remove(g)},e.showAllOutputs=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.widgets.forEach((e=>{"code"===e.model.type&&(e.outputHidden=!1)})),C.handleState(e,t)},e.enableOutputScrolling=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.widgets.forEach((t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.outputsScrolled=!0)})),C.handleState(e,t,!0)},e.disableOutputScrolling=function(e){if(!e.model||!e.activeCell)return;const t=C.getState(e);e.widgets.forEach((t=>{e.isSelectedOrActive(t)&&"code"===t.model.type&&(t.outputsScrolled=!1)})),C.handleState(e,t)},e.selectLastRunCell=function(e){let t=null,l=null;e.widgets.forEach(((e,n)=>{if("code"===e.model.type){const o=e.model.metadata.get("execution");if(o&&c.JSONExt.isObject(o)&&void 0!==o["iopub.status.busy"]){const e=o["iopub.status.busy"].toString();if(e){const o=new Date(e);(!t||o>=t)&&(t=o,l=n)}}}})),null!==l&&(e.activeCellIndex=l)},e.setMarkdownHeader=function(e,t){if(!e.model||!e.activeCell)return;const l=C.getState(e),n=e.model.cells;t=Math.min(Math.max(t,1),6),e.widgets.forEach(((l,o)=>{e.isSelectedOrActive(l)&&C.setMarkdownHeader(n.get(o),t)})),C.changeCellType(e,"markdown"),C.handleState(e,l)},e.collapseAll=function(t){for(const l of t.widgets)e.getHeadingInfo(l).isHeading&&(e.setHeadingCollapse(l,!0,t),e.setCellCollapse(l,!0))},e.expandAllHeadings=function(t){for(const l of t.widgets)e.getHeadingInfo(l).isHeading&&(e.setHeadingCollapse(l,!1,t),e.setCellCollapse(l,!1))},e.expandParent=function e(n,o){let i=function(e,t){const n=(0,d.findIndex)(t.widgets,((t,l)=>e.model.id===t.model.id));if(-1===n)return;if(n>=t.widgets.length)return;let o=l(t.widgets[n]);for(let e=n-1;e>=0;e--)if(e<t.widgets.length){let n=l(t.widgets[e]);if(n.isHeading&&n.headingLevel<o.headingLevel)return t.widgets[e]}}(n,o);i&&(l(i).collapsed||i.isHidden)&&(i.isHidden&&e(i,o),l(i).collapsed&&t(i,!1,o))},e.findNextParentHeading=function(e,t){let n=(0,d.findIndex)(t.widgets,((t,l)=>e.model.id===t.model.id));if(-1===n)return-1;let o=l(e);for(n+=1;n<t.widgets.length;n++){let e=l(t.widgets[n]);if(e.isHeading&&e.headingLevel<=o.headingLevel)return n}return t.widgets.length},e.setHeadingCollapse=t,e.toggleCurrentHeadingCollapse=function(t){if(!t.activeCell||void 0===t.activeCellIndex)return;let l=e.getHeadingInfo(t.activeCell);l.isHeading&&e.setHeadingCollapse(t.activeCell,!l.collapsed,t),a.ElementExt.scrollIntoViewIfNeeded(t.node,t.activeCell.node)},e.setCellCollapse=function(e,t){e instanceof o.MarkdownCell?e.headingCollapsed=t:e.setHidden(t)},e.getHeadingInfo=l,e.trust=function(e,t){const l=(t=t||i.nullTranslator).load("jupyterlab");if(!e.model)return Promise.resolve();const o=(0,d.toArray)(e.model.cells),c=o.every((e=>e.trusted)),a=s.createElement("p",null,l.__("A trusted Jupyter notebook may execute hidden malicious code when you open it."),s.createElement("br",null),l.__("Selecting trust will re-render this notebook in a trusted state."),s.createElement("br",null),l.__("For more information, see")," ",s.createElement("a",{href:"https://jupyter-server.readthedocs.io/en/stable/operators/security.html",target:"_blank",rel:"noopener noreferrer"},l.__("the Jupyter security documentation")));return c?(0,n.showDialog)({body:l.__("Notebook is already trusted"),buttons:[n.Dialog.okButton({label:l.__("Ok")})]}).then((()=>{})):(0,n.showDialog)({body:a,title:l.__("Trust this notebook?"),buttons:[n.Dialog.cancelButton({label:l.__("Cancel")}),n.Dialog.warnButton({label:l.__("Ok")})]}).then((e=>{e.button.accept&&o.forEach((e=>{e.trusted=!0}))}))}}(m||(m={})),function(e){function t(e){return{wasFocused:e.node.contains(document.activeElement),activeCell:e.activeCell}}function l(e,t,l=!1){const{activeCell:n,node:o}=e;(t.wasFocused||"edit"===e.mode)&&e.activate(),l&&n&&a.ElementExt.scrollIntoViewIfNeeded(o,n.node)}function c(e){const t=e.model,l=t.cells,n=[];e.mode="command",e.widgets.forEach(((l,o)=>{const i=!1!==l.model.metadata.get("deletable");e.isSelectedOrActive(l)&&i&&(n.push(o),t.deletedCells.push(l.model.id))})),n.length>0&&(l.beginCompoundOperation(),n.reverse().forEach((e=>{l.remove(e)})),l.length||l.push(t.contentFactory.createCell(e.notebookConfig.defaultCell,{})),l.endCompoundOperation(),e.activeCellIndex=n[0]-n.length+1),e.deselectAll()}e.executed=new r.Signal({}),e.executionScheduled=new r.Signal({}),e.selectionExecuted=new r.Signal({}),e.getState=t,e.handleState=l,e.handleRunState=function(e,t,l=!1){if((t.wasFocused||"edit"===e.mode)&&e.activate(),l&&t.activeCell){const l=t.activeCell.inputArea.node.getBoundingClientRect();e.scrollToPosition(l.bottom,45)}},e.cloneCell=function(e,t){switch(t.type){case"code":return e.contentFactory.createCodeCell({cell:t.toJSON()});case"markdown":return e.contentFactory.createMarkdownCell({cell:t.toJSON()});default:return e.contentFactory.createRawCell({cell:t.toJSON()})}},e.runSelected=function(t,l){t.mode="command";let c=t.activeCellIndex;const a=t.widgets.filter(((e,l)=>{const n=t.isSelectedOrActive(e);return n&&(c=l),n}));return t.activeCellIndex=c,t.deselectAll(),Promise.all(a.map((c=>function(t,l,c,a){var r,s,u;const g=(a=a||i.nullTranslator).load("jupyterlab");switch(l.model.type){case"markdown":l.rendered=!0,l.inputHidden=!1,e.executed.emit({notebook:t,cell:l,success:!0});break;case"code":if(c){if(c.isTerminating){(0,n.showDialog)({title:g.__("Kernel Terminating"),body:g.__("The kernel for %1 appears to be terminating. You can not run any cell for now.",null===(r=c.session)||void 0===r?void 0:r.path),buttons:[n.Dialog.okButton({label:g.__("Ok")})]});break}if(c.pendingInput)return(0,n.showDialog)({title:g.__("Cell not executed due to pending input"),body:g.__("The cell has not been executed to avoid kernel deadlock as there is another pending input! Submit your pending input and try again."),buttons:[n.Dialog.okButton({label:g.__("Ok")})]}),Promise.resolve(!1);const i=null!==(u=null===(s=t.model)||void 0===s?void 0:s.deletedCells)&&void 0!==u?u:[];return e.executionScheduled.emit({notebook:t,cell:l}),o.CodeCell.execute(l,c,{deletedCells:i,recordTiming:t.notebookConfig.recordTiming}).then((e=>{if(i.splice(0,i.length),l.isDisposed)return!1;if(!e)return!0;if("ok"===e.content.status){const n=e.content;return n.payload&&n.payload.length&&function(e,t,l){var n;const o=null===(n=e.payload)||void 0===n?void 0:n.filter((e=>"set_next_input"===e.source))[0];if(!o)return;const i=o.text;if(o.replace)return void(l.model.value.text=i);const c=t.model.contentFactory.createCodeCell({}),a=t.model.cells,r=d.ArrayExt.firstIndexOf((0,d.toArray)(a),l.model);c.value.text=i,-1===r?a.push(c):a.insert(r+1,c)}(n,t,l),!0}throw new f(e.content)})).catch((n=>{if(l.isDisposed||n.message.startsWith("Canceled"))return!1;throw e.executed.emit({notebook:t,cell:l,success:!1,error:n}),n})).then((n=>(n&&e.executed.emit({notebook:t,cell:l,success:!0}),n)))}l.model.clearExecution()}return Promise.resolve(!0)}(t,c,l)))).then((l=>!t.isDisposed&&(e.selectionExecuted.emit({notebook:t,lastCell:t.widgets[c]}),t.update(),l.every((e=>e))))).catch((l=>{if(!l.message.startsWith("KernelReplyNotOK"))throw l;return a.map((e=>{"code"===e.model.type&&null==e.model.executionCount&&e.setPrompt("")})),e.selectionExecuted.emit({notebook:t,lastCell:t.widgets[c]}),t.update(),!1}))},e.copyOrCut=function(e,o){if(!e.model||!e.activeCell)return;const i=t(e),d=n.Clipboard.getInstance();e.mode="command",d.clear();const a=e.widgets.filter((t=>e.isSelectedOrActive(t))).map((e=>e.model.toJSON())).map((e=>(void 0!==e.metadata.deletable&&delete e.metadata.deletable,e)));d.setData(u,a),o?c(e):e.deselectAll(),e.lastClipboardInteraction=o?"cut":"copy",l(e,i)},e.changeCellType=function(e,t){const l=e.model,n=l.cells;n.beginCompoundOperation(),e.widgets.forEach(((o,i)=>{if(e.isSelectedOrActive(o)){if(o.model.type!==t){const e=o.model.toJSON();let d;switch(t){case"code":d=l.contentFactory.createCodeCell({cell:e});break;case"markdown":d=l.contentFactory.createMarkdownCell({cell:e}),"code"===o.model.type&&(d.trusted=!1);break;default:d=l.contentFactory.createRawCell({cell:e}),"code"===o.model.type&&(d.trusted=!1)}n.set(i,d)}"markdown"===t&&((o=e.widgets[i]).rendered=!1)}})),n.endCompoundOperation(),e.deselectAll()},e.deleteCells=c,e.setMarkdownHeader=function(e,t){let l=e.value.text;const n=Array(t+1).join("#")+" ",o=/^(#+\s*)|^(\s*)/.exec(l);o&&(l=l.slice(o[0].length)),e.value.text=n+l}}(C||(C={}))}}]);